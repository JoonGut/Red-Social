<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- favicon -->
  <link rel="icon" type="image/png" href="../imagenes/logo.png"/>
  <title>Buscador de libros</title>
  <link rel="stylesheet" href="../css/buscador.css" type="text/css" />
</head>
<body>
    <nav>
        <h1>Buscardor de Libros</h1>
        <a href="../html/lista.html"><h5>Volver a la lista de la compra</h5></a>
    </nav>
    <br><br>
    <form id="formulario">
        <label>Título: <input type="text" id="titulo"></label><br><br>
        <label><input type="radio" name="opcion" value="titulo" checked> And</label>
        <label><input type="radio" name="opcion" value="autor"> Or</label><br><br>
        <label>Autor: <input type="text" id="autor"></label><br><br>

        <label>Categoría: 
        <select id="categoria">
            <option value="">Cualquiera</option>
            <option value="Aventura">Aventura</option>
            <option value="Fantasia">Fantasía</option>
            <option value="Thriller">Thriller</option>
            <option value="Terror">Terror</option>
        </select>
        </label><br><br>

        <b>Orden:</b><br>
        <label><input type="radio" name="orden" value="titulo" checked> Título</label>
        <label><input type="radio" name="orden" value="autor"> Autor</label><br><br>

        <button type="submit">Buscar</button>
    </form>

    <div id="resultados"></div>

    <script>
        const libros = [
        {titulo:"Las tinieblas y el alba", autor:"Ken Follett", categoria:"Aventura"},
        {titulo:"Tierra de sangre", autor:"Marta Lujan", categoria:"Aventura"},
        {titulo:"Nieve en marte", autor:"Pablo Tebar", categoria:"Aventura"},
        {titulo:"Leyes de fuego", autor:"Sergio Milan", categoria:"Terror"},
        {titulo:"Fires every where", autor:"Carlos Perez", categoria:"Thriller"},
        {titulo:"Los hombres del norte", autor:"John Haywood", categoria:"Aventura"},
        {titulo:"Cuando las estrellas dejen de brillar", autor:"Galin H", categoria:"Aventura"},
        {titulo:"Narnia", autor:"Clive Lewis", categoria:"Fantasia"},
        ];

        const form = document.getElementById('formulario');
        const resultados = document.getElementById('resultados');

        form.addEventListener('submit', e => {
        e.preventDefault();
        const titulo = document.getElementById('titulo').value.toLowerCase();
        const autor = document.getElementById('autor').value.toLowerCase();
        const categoria = document.getElementById('categoria').value;
        const orden = document.querySelector('input[name="orden"]:checked').value;

        // Filtrado combinando los criterios con AND
        const filtrados = libros.filter(libro => {
            const tituloMatch = libro.titulo.toLowerCase().includes(titulo);
            const autorMatch = libro.autor.toLowerCase().includes(autor);
            const categoriaMatch = categoria === "" || libro.categoria === categoria;
            return tituloMatch && autorMatch && categoriaMatch;
        });

        // Ordenar resultados
        filtrados.sort((a,b) => a[orden].localeCompare(b[orden]));

      // Mostrar resultados
        resultados.innerHTML = "";
        if(filtrados.length === 0){
            resultados.innerHTML = "<p>No se encontraron libros.</p>";
        } else {
            filtrados.forEach(libro => {
            resultados.innerHTML += `<div class="libro"><strong>${libro.titulo}</strong> - ${libro.autor} (${libro.categoria})</div>`;
            });
        }
        });
    </script>
    <br><br><br><br><br><br>
    <footer>
    <div id="contenedor-footer">
      <div id="contenido-footer">
        <h4>Phone</h4>
        <p>+34 944 88 66 22</p>
      </div>
    <div id="contenido-footer">
      <h4>Email</h4>
      <p>info_libreria@libreria.com</p>
    </div>
    </div>
    <p id="footer">© 2025 Librería Mundo de Letras. Todos los derechos reservados.</p>
</footer>
</body>
</html>
